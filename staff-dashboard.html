<!-- staff-dashbord.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FrontDash • Staff Dashboard</title>

  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
  <link href="assets/css/styles.css" rel="stylesheet" />
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark border-bottom border-secondary sticky-top">
  <div class="container-fluid">
    <a class="navbar-brand" href="index.html">FrontDash</a>

    <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#navOffcanvas">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="d-flex align-items-center gap-3">
      <!-- open clsoed button -->
      <div class="form-check form-switch me-2">
        <input class="form-check-input" type="checkbox" id="openSwitch">
        <label class="form-check-label" for="openSwitch">Open</label>
      </div>

      <div class="form-check form-switch me-2">
        <input class="form-check-input" type="checkbox" id="themeSwitch">
        <label class="form-check-label" for="themeSwitch">Dark</label>
      </div>

      <!-- auth badge area -->
      <div id="authArea" class="me-2"></div>

      <!-- fallback login link -->
      <a class="btn btn-outline-light" href="login.html">Login</a>
    </div>

    <div class="offcanvas offcanvas-end" tabindex="-1" id="navOffcanvas">
      <div class="offcanvas-header">
        <h5 class="offcanvas-title">Menu</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"></button>
      </div>
      <div class="offcanvas-body">
        <ul class="navbar-nav flex-grow-1">
          <li class="nav-item"><a class="nav-link" href="index.html">Home / Menu</a></li>
          <li class="nav-item"><a class="nav-link" href="cart.html">Cart</a></li>
          <li class="nav-item"><a class="nav-link" href="review.html">Review</a></li>
          <li class="nav-item"><a class="nav-link" href="payment.html">Payment</a></li>
          <li class="nav-item"><a class="nav-link" href="delivery.html">Delivery</a></li>
          <li class="nav-item"><a class="nav-link" href="confirm.html">Confirmation</a></li>
          <li class="nav-item"><a class="nav-link" href="login.html">Login</a></li>
        </ul>
      </div>
    </div>
  </div>
</nav>

<main class="container py-4">
  <div class="d-flex align-items-center justify-content-between mb-3">
    <div>
      <h1 class="h3 mb-1">Staff Dashboard</h1>
      <p class="text-muted mb-0">
        Manage orders, assign drivers (names only), and update status.
      </p>
    </div>
    <div class="d-flex gap-2">
      <!-- import latest customer order into the queue -->
      <button class="btn btn-outline-primary" id="importLastOrderBtn">
        Import Last Order
      </button>
    </div>
  </div>

  <!-- change password -->
  <div class="card mb-3">
    <div class="card-body">
      <h2 class="h6 mb-3">Change Password</h2>
      <form id="changePwForm" class="row g-3 align-items-end">
        <div class="col-md-3">
          <label for="currentPassword" class="form-label mb-1">Current Password</label>
          <input
            type="password"
            class="form-control"
            id="currentPassword"
            autocomplete="current-password"
            required
          />
        </div>
        <div class="col-md-3">
          <label for="newPassword" class="form-label mb-1">New Password</label>
          <input
            type="password"
            class="form-control"
            id="newPassword"
            autocomplete="new-password"
            required
          />
        </div>
        <div class="col-md-3">
          <label for="confirmPassword" class="form-label mb-1">Confirm New Password</label>
          <input
            type="password"
            class="form-control"
            id="confirmPassword"
            autocomplete="new-password"
            required
          />
        </div>
        <div class="col-md-3">
          <button type="submit" class="btn btn-primary w-100">
            Update Password
          </button>
        </div>
      </form>
      <p class="small text-muted mt-2 mb-0">
        Default staff password is <code>Abcd123!</code> — update it after first login.
      </p>
    </div>
  </div>

  <!-- active and completed orders -->
  <ul class="nav nav-tabs" id="staffTabs" role="tablist">
    <li class="nav-item" role="presentation">
      <button
        class="nav-link active"
        id="active-tab"
        data-bs-toggle="tab"
        data-bs-target="#activePane"
        type="button"
        role="tab"
        aria-controls="activePane"
        aria-selected="true"
      >
        Active Orders
      </button>
    </li>
    <li class="nav-item" role="presentation">
      <button
        class="nav-link"
        id="completed-tab"
        data-bs-toggle="tab"
        data-bs-target="#completedPane"
        type="button"
        role="tab"
        aria-controls="completedPane"
        aria-selected="false"
      >
        Completed
      </button>
    </li>
  </ul>

  <div class="tab-content pt-3">
    <!--active orders -->
    <div
      class="tab-pane fade show active"
      id="activePane"
      role="tabpanel"
      aria-labelledby="active-tab"
      tabindex="0"
    >
      <div class="card mb-3">
        <div class="card-body d-flex flex-wrap gap-3 align-items-end">
          <div>
            <label class="form-label mb-1">Filter by status</label>
            <select class="form-select" id="statusFilter" style="min-width: 220px;">
              <option value="all">All</option>
              <option value="new">New</option>
              <option value="accepted">Accepted</option>
              <option value="assigned">Assigned</option>
              <option value="out_for_delivery">Out for Delivery</option>
            </select>
          </div>
          <div class="ms-auto small text-muted">
            Orders: <span id="activeCount">0</span>
          </div>
        </div>
      </div>

      <div class="table-responsive">
        <table class="table table-dark align-middle table-striped mb-0">
          <thead>
          <tr>
            <th>Order #</th>
            <th>Placed</th>
            <th>Items</th>
            <th class="text-end">Total</th>
            <th>ETA</th>
            <th>Driver</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
          </thead>
          <tbody id="activeOrdersBody"></tbody>
        </table>
      </div>
      <div
        id="noActiveOrders"
        class="text-center text-muted py-4 d-none"
      >
        No active orders.
      </div>
    </div>

    <!--completed orders -->
    <div
      class="tab-pane fade"
      id="completedPane"
      role="tabpanel"
      aria-labelledby="completed-tab"
      tabindex="0"
    >
      <div class="d-flex justify-content-between align-items-center mb-2">
        <h2 class="h6 mb-0">Completed / Canceled</h2>
        <div class="small text-muted">
          Total: <span id="completedCount">0</span>
        </div>
      </div>

      <div class="table-responsive">
        <table class="table table-dark align-middle table-striped mb-0">
          <thead>
          <tr>
            <th>Order #</th>
            <th>Placed</th>
            <th>Items</th>
            <th class="text-end">Total</th>
            <th>ETA</th>
            <th>Actual</th>
            <th>Final Status</th>
            <th>Driver</th>
          </tr>
          </thead>
          <tbody id="completedOrdersBody"></tbody>
        </table>
      </div>
      <div
        id="noCompletedOrders"
        class="text-center text-muted py-4 d-none"
      >
        No completed orders.
      </div>
    </div>
  </div>
</main>

<footer class="container py-4 small">
  <div class="d-flex justify-content-between">
    <span>&copy; 2025 FrontDash</span>
    <span>No payment on delivery • ETA is automatic</span>
  </div>
</footer>

<!-- toast -->
<div class="position-fixed bottom-0 end-0 p-3" style="z-index: 1100;">
  <div
    id="mainToast"
    class="toast text-bg-dark border-0"
    role="status"
    aria-live="polite"
    aria-atomic="true"
  >
    <div class="toast-header bg-dark text-white">
      <strong class="me-auto">FrontDash</strong>
      <small>Now</small>
      <button
        type="button"
        class="btn-close btn-close-white ms-2 mb-1"
        data-bs-dismiss="toast"
      ></button>
    </div>
    <div class="toast-body" id="toastBody">—</div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="assets/js/state.js"></script>
<script src="assets/js/validators.js"></script>
<script src="assets/js/helpers.js"></script>
<script>src="assets/js/app.js"</script> 
<script src="assets/js/pages/staff-dashboard.js"></script>
</body>
</html>
